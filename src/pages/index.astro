---
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import { marked } from 'marked';
import "../styles/global.css"; // Tailwind CSS

const NOTES_DIR = './content';


let contentHtml = '';
let title = 'Home';

try {
  const filePath = path.join(NOTES_DIR, 'index.md');
  const rawContent = fs.readFileSync(filePath, 'utf-8');
  const parsed = matter(rawContent);

  contentHtml = marked.parse(parsed.content);
  title = parsed.data?.title ?? 'Home';
} catch (err) {
  contentHtml = `<p class="text-red-600">Error loading homepage content: ${err.message}</p>`;
}
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
  </head>
  <body class="bg-white text-gray-900 font-sans antialiased px-6 py-12 max-w-2xl mx-auto leading-relaxed">
    <article class="prose prose-lg prose-neutral" set:html={contentHtml} />
  </body>
</html>
